function b(e){for(let t in e)if(typeof e[t]!="function")throw new Error("actions \u91CC\u53EA\u80FD\u653E\u51FD\u6570")}function w(e){if(e===null||typeof e!="object")throw new Error("state \u5FC5\u987B\u662F\u5BF9\u8C61")}function m(e){let{state:t={},actions:r={}}=e;w(t),b(r)}function y(e,t=!1){function r(o,s){if(t){let A=e.state[o];s(o,A)}let n=e.trackStore,c=n[o];c||(c=n[o]=new Set),c.add(s)}return(o,s)=>{if(Array.isArray(o))for(let n of o)r(n,s);else r(o,s)}}function g({trackStore:e}){function t(r,o){let s=e[r];!s||s.delete(o)}return(r,o)=>{if(Array.isArray(r))for(let s of r)t(s,o);else t(r,o)}}function P(e,t){let{trackStore:r}=e,o=e.state[t],s=r[t];if(!!s)for(let n of s)n(t,o)}var x=!1,i=null;function h(e){let{state:t,actions:r,storeApi:o}=e;return new Proxy(e,{get(s,n){if(n in e)return e[n];if(n in o)return o[n];if(n in t)return t[n];if(n in r)return r[n];throw new Error(`\u4E0D\u80FD\u83B7\u53D6 ${n}`)},set(s,n,c){if(n in e||n in o)throw new Error(`${n} \u662F Store \u81EA\u5E26\u7684\u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539`);if(n in t)return t[n]=c,!0;throw n in r?new Error(`${n} \u662F actions , \u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539`):new Error(`${n} \u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539\u6216\u6DFB\u52A0`)}})}function S(e,t,r=null){let{isDeepWatch:o}=e.options;return new Proxy(t,{set(s,n,c){if(s[n]===c)return!0;if(o){if(x)return s[n]=c,!0;typeof c=="object"&&c!==null?(i=r??n,s[n]=u(e,c),i=null):s[n]=c}else s[n]=c;return P(e,r??n),!0}})}function u(e,t,r=!1){let o=Array.isArray(t)?[]:{};function s(n,c,A=!1){for(let a in n){let I=n[a];if(A&&(i=a),typeof I=="object"&&I!==null){let d=Array.isArray(I)?[]:{};s(I,d),c[a]=S(e,d,i)}else c[a]=I;A&&(i=null)}}return x=!0,s(t,o,r),x=!1,S(e,o,r?null:i)}var O=0;function j(e,t){let{isDeepWatch:r}=e.options,o=r?u(e,t,!0):S(e,t);e.state=o}function k(e){let t={watch:y(e),watchEffect:y(e,!0),deleteWatch:g(e)};e.storeApi=t}function R(e,t={}){let{state:r={},actions:o={}}=e,s={id:O++,trackStore:{},storeApi:{},state:{},actions:o,options:t};return k(s),j(s,r),s}function l(e,t){m(e);let r=R(e,t);return h(r)}var f=l({state:{userInfo:{name:"hxl",age:18},books:[{id:100,name:"JS\u9AD8\u7EA7\u7A0B\u5E8F\u8BBE\u8BA1",price:88},{id:101,name:"Vue\u9AD8\u7EA7\u7A0B\u5E8F\u8BBE\u8BA1",price:99},{id:102,name:"React\u9AD8\u7EA7\u7A0B\u5E8F\u8BBE\u8BA1",price:87}]},actions:{changeUserInfoAction(e){this.userInfo=e},changeBookPriceAction(e,t){this.books[e].price=t}}},{isDeepWatch:!0});function p(e,t){console.log("getUserInfo",e,t)}function E(e,t){console.log("getBooks",e,t)}f.watchEffect("userInfo",p);f.watchEffect("books",E);console.log("------------------------------");f.changeUserInfoAction({name:"coderhxl",age:18});f.changeBookPriceAction(0,66);
