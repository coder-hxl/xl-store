"use strict";var l=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var h=(t,e)=>{for(var n in e)l(t,n,{get:e[n],enumerable:!0})},b=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of d(e))!g.call(t,c)&&c!==n&&l(t,c,{get:()=>e[c],enumerable:!(r=k(e,c))||r.enumerable});return t};var j=t=>b(l({},"__esModule",{value:!0}),t);var _={};h(_,{default:()=>x});module.exports=j(_);var O=0,A=!1,u=null;function E(t){for(let e in t)if(typeof t[e]!="function")throw new Error("actions \u91CC\u53EA\u80FD\u653E\u51FD\u6570")}function P(t){if(t===null||typeof t!="object")throw new Error("state \u5FC5\u987B\u662F\u5BF9\u8C61")}function m(t){return(e,n)=>{let r=t[e];r||(r=t[e]=new Set),r.add(n)}}function $(t){return(e,n)=>{let r=t[e];!r||r.delete(n)}}function y(t,e){let{trackStore:n}=t,r=t.state[e],c=n[e];if(!!c)for(let o of c)o(e,r)}function T(t,e){let{state:n,actions:r}=t;return new Proxy(t,{get(c,o){if(o in e)return e[o];if(o in n)return n[o];if(o in r)return r[o];throw new Error(`\u6CA1\u6709\u627E\u5230 ${o}`)},set(c,o,i){if(o in e)throw new Error(`${o} \u662F Store \u81EA\u5E26\u7684\u65B9\u6CD5\u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539`);if(o in n)return n[o]=i,!0;throw o in r?new Error(`${o} \u662F actions \u7684\u65B9\u6CD5, \u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539`):new Error(`${o} \u8BF7\u5728\u521B\u5EFA Store \u65F6\u6DFB\u52A0\u5230 State \u6216 Actions \u4E2D`)}})}function S(t,e,n=null){let{sameValueExecuteWatch:r}=t.options;return new Proxy(e,{set(c,o,i){return!r&&c[o]===i?!0:A?(c[o]=i,!0):(typeof i=="object"&&i!==null?(u=n||o,c[o]=w(t,i),u=null):c[o]=i,n?y(t,n):y(t,o),!0)}})}function w(t,e,n=!1){let r={};Array.isArray(e)&&(r=[]),A=!0;function c(o,i,a=!1){for(let s in o){let f=o[s];if(a&&(u=s),typeof f=="object"&&f!==null){let I={};Array.isArray(f)&&(I=[]),c(f,I),i[s]=S(t,I,u)}else i[s]=f;a&&(u=null)}}return c(e,r,n),A=!1,n?S(t,r):S(t,r,u)}function F(t,e,n){let r={id:O++,trackStore:{},state:{},actions:e,options:n};return r.state=w(r,t,!0),r}function W(t){let{trackStore:e}=t;return{watch:m(e),deleteWatch:$(e)}}function x(t,e={}){var a,s;let n=(a=t.state)!=null?a:{},r=(s=t.actions)!=null?s:{};P(n),E(r);let c=F(n,r,e),o=W(c);return T(c,o)}0&&(module.exports={});
