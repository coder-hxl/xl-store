function u(t,s=!1){function r(n,o){if(s){let S=t.state[n];o(n,S)}let i=t.trackStore,e=i[n];e||(e=i[n]=new Set),e.add(o)}return(n,o)=>{if(Array.isArray(n))for(let i of n)r(i,o);else r(n,o)}}function m({trackStore:t}){function s(r,n){let o=t[r];!o||o.delete(n)}return(r,n)=>{if(Array.isArray(r))for(let o of r)s(o,n);else s(r,n)}}function y(t,s){let{trackStore:r}=t,n=t.state[s],o=r[s];if(!!o)for(let i of o)i(s,n)}var l=!1,c=null;function w(t,s){let{state:r,actions:n}=t;return new Proxy(t,{get(i,e){if(e in t)return t[e];if(e in s)return s[e];if(e in r)return r[e];if(e in n)return n[e];throw new Error(`\u4E0D\u80FD\u83B7\u53D6 ${e}`)},set(i,e,S){if(e in s)throw new Error(`${e} \u662F Store \u81EA\u5E26\u7684\u65B9\u6CD5\u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539`);if(e in r)return r[e]=S,!0;throw e in n?new Error(`${e} \u662F actions \u7684\u65B9\u6CD5, \u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539`):new Error(`${e} \u8BF7\u5728\u521B\u5EFA Store \u65F6\u6DFB\u52A0\u5230 State \u6216 Actions \u4E2D`)}})}function x(t,s,r=null){let{isDeepWatch:n}=t.options;return new Proxy(s,{set(o,i,e){return o[i]===e?!0:l?(o[i]=e,!0):(n&&typeof e=="object"&&e!==null?(c=r||i,o[i]=d(t,e),c=null):o[i]=e,r?y(t,r):y(t,i),!0)}})}function d(t,s,r=!1){let{isDeepWatch:n}=t.options,o={};Array.isArray(s)&&(o=[]);function i(e,S,A=!1){for(let I in e){let f=e[I];if(A&&(c=I),typeof f=="object"&&f!==null){let a={};Array.isArray(f)&&(a=[]),i(f,a),S[I]=x(t,a,c)}else S[I]=f;A&&(c=null)}}return n?(l=!0,i(s,o,r),l=!1):o=s,r?x(t,o):x(t,o,c)}var P=0;function O(t,s,r){let n={id:P++,trackStore:{},state:{},actions:s,options:r};return n.state=d(n,t,!0),n}function j(t){return{watch:u(t),watchEffect:u(t,!0),deleteWatch:m(t)}}function h(t){for(let s in t)if(typeof t[s]!="function")throw new Error("actions \u91CC\u53EA\u80FD\u653E\u51FD\u6570")}function p(t){if(t===null||typeof t!="object")throw new Error("state \u5FC5\u987B\u662F\u5BF9\u8C61")}function b(t,s={}){var S,A;let r=(S=t.state)!=null?S:{},n=(A=t.actions)!=null?A:{};p(r),h(n);let o=O(r,n,s),i=j(o);return w(o,i)}export{b as default};
