function O(t){for(let r in t)if(typeof t[r]!="function")throw new Error("actions \u91CC\u53EA\u80FD\u653E\u51FD\u6570")}function j(t){if(t===null||typeof t!="object")throw new Error("state \u5FC5\u987B\u662F\u5BF9\u8C61")}function l(t){let{state:r={},actions:n={}}=t;j(r),O(n)}function f(t,r=!1){function n(s,o){if(r){let i=t.state[s];o(s,i)}let e=t.trackStore,c=e[s];c||(c=e[s]=new Set),c.add(o)}return(s,o)=>{if(Array.isArray(s))for(let e of s)n(e,o);else n(s,o)}}function d({trackStore:t}){function r(n,s){let o=t[n];!o||o.delete(s)}return(n,s)=>{if(Array.isArray(n))for(let o of n)r(o,s);else r(n,s)}}function P(t,r){let{trackStore:n}=t,s=t.state[r],o=n[r];if(!!o)for(let e of o)e(r,s)}var x=!1,I=null;function m(t){let{state:r,actions:n,storeApi:s}=t;return new Proxy(t,{get(o,e){if(e in t)return t[e];if(e in s)return s[e];if(e in r)return r[e];if(e in n)return n[e];throw new Error(`\u4E0D\u80FD\u83B7\u53D6 ${e}`)},set(o,e,c){if(e in t||e in s)throw new Error(`${e} \u662F Store \u81EA\u5E26\u7684\u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539`);if(e in r)return r[e]=c,!0;throw e in n?new Error(`${e} \u662F actions , \u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539`):new Error(`${e} \u4E0D\u5141\u8BB8\u88AB\u4FEE\u6539\u6216\u6DFB\u52A0`)}})}function a(t,r,n=null){let{isDeepWatch:s}=t.options;return new Proxy(r,{set(o,e,c){if(o[e]===c)return!0;if(s){if(x)return o[e]=c,!0;typeof c=="object"&&c!==null?(I=n!=null?n:e,o[e]=y(t,c),I=null):o[e]=c}else o[e]=c;return P(t,n!=null?n:e),!0}})}function y(t,r,n=!1){let s=Array.isArray(r)?[]:{};function o(e,c,i=!1){for(let S in e){let A=e[S];if(i&&(I=S),typeof A=="object"&&A!==null){let u=Array.isArray(A)?[]:{};o(A,u),c[S]=a(t,u,I)}else c[S]=A;i&&(I=null)}}return x=!0,o(r,s,n),x=!1,a(t,s,n?null:I)}var g=0;function w(t,r){let{isDeepWatch:n}=t.options,s=n?y(t,r,!0):a(t,r);t.state=s}function b(t){let r={watch:f(t),watchEffect:f(t,!0),deleteWatch:d(t)};t.storeApi=r}function R(t,r={}){let{state:n={},actions:s={}}=t,o={id:g++,trackStore:{},storeApi:{},state:{},actions:s,options:r};return b(o),w(o,n),o}function h(t,r){l(t);let n=R(t,r);return m(n)}export{h as default};
