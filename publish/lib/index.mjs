function t(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(!t)return;if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return n(t,r)}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){f=!0,a=t},f:function(){try{u||null==e.return||e.return()}finally{if(f)throw a}}}}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function e(t){var n=t.state,e=void 0===n?{}:n,o=t.actions,i=void 0===o?{}:o;!function(t){if(null===t||"object"!==r(t))throw new Error("state 必须是对象")}(e),function(t){for(var n in t)if("function"!=typeof t[n])throw new Error("actions 里只能放函数")}(i)}function o(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function e(t,e){r&&e(t,n.state[t]);var o=n.trackStore,i=o[t];i||(i=o[t]=new Set),i.add(e)}return function(n,r){if(Array.isArray(n)){var o,i=t(n);try{for(i.s();!(o=i.n()).done;){e(o.value,r)}}catch(t){i.e(t)}finally{i.f()}}else e(n,r)}}function i(n){var r=n.trackStore;function e(t,n){var e=r[t];e&&e.delete(n)}return function(n,r){if(Array.isArray(n)){var o,i=t(n);try{for(i.s();!(o=i.n()).done;){e(o.value,r)}}catch(t){i.e(t)}finally{i.f()}}else e(n,r)}}function a(n,r){var e=n.trackStore,o=n.state[r],i=e[r];if(i){var a,u=t(i);try{for(u.s();!(a=u.n()).done;){(0,a.value)(r,o)}}catch(t){u.e(t)}finally{u.f()}}}var u=!1,f=null;function c(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=t.options.isDeepWatch;return new Proxy(n,{set:function(n,i,c){if(n[i]===c)return!0;if(o){if(u)return n[i]=c,!0;"object"===r(c)&&null!==c?(f=null!=e?e:i,n[i]=l(t,c),f=null):n[i]=c}else n[i]=c;return a(t,null!=e?e:i),!0}})}function l(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Array.isArray(n)?[]:{};function i(n,e){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var a in n){var u=n[a];if(o&&(f=a),"object"===r(u)&&null!==u){var l=Array.isArray(u)?[]:{};i(u,l),e[a]=c(t,l,f)}else e[a]=u;o&&(f=null)}}return u=!0,i(n,o,e),u=!1,c(t,o,e?null:f)}var s=0;function y(t,n){var r=t.options.isDeepWatch?l(t,n,!0):c(t,n);t.state=r}function v(t){var n={watch:o(t),watchEffect:o(t,!0),deleteWatch:i(t)};t.storeApi=n}function d(t,n){e(t);var r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.state,e=void 0===r?{}:r,o=t.actions,i={id:s++,trackStore:{},storeApi:{},state:{},actions:void 0===o?{}:o,options:n};return v(i),y(i,e),i}(t,n),o=function(t){var n=t.state,r=t.actions,e=t.storeApi;return new Proxy(t,{get:function(t,o){return o in e?e[o]:o in n?n[o]:o in r?r[o]:void 0},set:function(t,o,i){if(o in e)throw new Error("".concat(o," 是 Store 自带的不允许被修改"));if(o in n)return n[o]=i,!0;throw o in r?new Error("".concat(o," 是 actions , 不允许在此被修改")):new Error("".concat(o," 不允许被修改或添加"))}})}(r);return o}export{d as default};